/*
 * Copyright 2016-2023 JetBrains s.r.o. Use of this source code is governed by the Apache 2.0 license.
 */

kotlin {
    wasmJs {
        moduleName = project.name
        nodejs()
        compilations['main']?.dependencies {
            api "org.jetbrains.kotlinx:atomicfu-wasm-js:$atomicfu_version"
        }
    }

    sourceSets {
        wasmJsMain {
            kotlin {
                srcDir 'jsWasm/src'
                srcDir 'wasmJs/src'
            }
        }
        wasmJsTest {
            kotlin {
                srcDir 'jsWasm/test'
                srcDir 'wasmJs/test'
            }
        }
        wasmJsTest.dependencies {
            api "org.jetbrains.kotlin:kotlin-test-wasm-js:$kotlin_version"
        }
    }
}